(()=>{"use strict";var e,t={727:(e,t,r)=>{var n=r(187),i=r(958),o=r(905),s=r(578),a=r(590),c=r(466),l=new(function(){function e(){(0,s.Z)(this,e),(0,c.Z)(this,"api",new URL("https://api.github.com/search/repositories?q=stars:%3E1&sort=stars&order=desc&type=Repositories")),(0,c.Z)(this,"cachelife",0)}return(0,a.Z)(e,[{key:"getRepositories",value:function(e){var t=this,r=this.getCache(e);if(null!=r)return Promise.resolve(r);var n=new URL(this.api);return Object.entries(e).forEach((function(e){var t=(0,i.Z)(e,2),r=t[0],o=t[1];n.searchParams.set(r,o)})),fetch(n).then((function(e){if(e.ok)return e.json();throw e})).then((function(r){return t.setCache(e,r.items),r.items}))}},{key:"setCache",value:function(e,t){var r=this.getCacheKey(e);window.localStorage.setItem(r,JSON.stringify({timestamp:Date.now(),data:t}))}},{key:"getCache",value:function(e){var t=this.getCacheKey(e),r=window.localStorage.getItem(t);if(!r)return null;try{var n=JSON.parse(r);return Date.now()-n.timestamp>this.cachelife?(console.log("缓存未命中"),null):(console.log("缓存命中"),console.log(n.data),n.data)}catch(e){return console.error(e),null}}},{key:"getCacheKey",value:function(e){return JSON.stringify({language:e.language,page:e.page,per_page:e.per_page})}}]),e}());function u(e){if(e instanceof Response){if(!e.headers.has("x-ratelimit-remaining"))return!1;if("0"===e.headers.get("x-ratelimit-remaining"))return"慢一点，请求太频繁了，".concat(Math.ceil((1e3*e.headers.get("x-ratelimit-reset")-Date.now())/1e3),"秒后重试")}return!1}function f(e){return Intl.NumberFormat("en-US",{style:"decimal"}).format(e)}var h=r(168);const d={button:"Btl4V6EKRMIg4YbvQYY8"};var p=r(515);function g(e){var t=e.size||16;return(0,p.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",width:t,height:t,color:e.color,fontSize:t},children:(0,p.jsx)("i",{className:"fa-solid fa-".concat(e.name," ").concat(e.className)})})}var j=["loading"];function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach((function(t){(0,c.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function m(e){e.loading;var t=(0,h.Z)(e,j);return(0,p.jsxs)("button",v(v({type:"button",className:d.button},t),{},{children:[e.loading&&(0,p.jsx)("div",{style:{marginRight:8},children:(0,p.jsx)(g,{name:"spinner",className:"fa-spin-pulse"})}),e.children]}))}var x="#61dafb",b={textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"};function O(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function w(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?O(Object(r),!0).forEach((function(t){(0,c.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function P(e){return(0,p.jsxs)(k,{children:[(0,p.jsx)(S,{value:e.rank}),(0,p.jsx)(C,{src:e.avatar}),(0,p.jsx)(D,{href:e.url,children:e.name}),(0,p.jsxs)(R,{children:[(0,p.jsx)(Z,{icon:(0,p.jsx)(g,{name:"user",color:"orange"}),emphasis:!0,children:e.username}),(0,p.jsxs)(Z,{icon:(0,p.jsx)(g,{name:"star",color:"yellow"}),children:[f(e.stars)," stars"]}),(0,p.jsxs)(Z,{icon:(0,p.jsx)(g,{name:"code-fork",color:"#1f74e7"}),children:[f(e.forks)," forks"]}),(0,p.jsxs)(Z,{icon:(0,p.jsx)(g,{name:"triangle-exclamation",color:"#f14c4c"}),children:[f(e.issues)," open issues"]})]})]})}function k(e){return(0,p.jsx)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",border:"1px solid rgba(0, 0, 0, 0.5)",borderRadius:4,padding:"16px 32px"},children:e.children})}function S(e){return(0,p.jsxs)("div",{style:{fontSize:32},children:["#",e.value]})}function C(e){return(0,p.jsx)("img",{style:{width:80,height:80,backgroundColor:"rgba(0, 0, 0, 0.7)",objectFit:"cover"},src:e.src,alt:"头像"})}function D(e){return(0,p.jsx)("div",{style:w({marginTop:16,fonsSize:24,fonstWeight:"bold",color:x},b),children:(0,p.jsx)("a",{href:e.href,children:e.children})})}function R(e){return(0,p.jsx)("dl",{style:{width:"100%"},children:e.children})}function Z(e){return(0,p.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,p.jsx)("dt",{children:e.icon}),(0,p.jsx)("dd",{style:w({fontWeight:e.emphasis?"bold":"normal",marginLeft:8},b),children:e.children})]})}function E(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function I(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?E(Object(r),!0).forEach((function(t){(0,c.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):E(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _(e){return(0,p.jsx)("div",{style:I({display:"flex",alignItems:"center",justifyContent:"center"},e.style),children:e.children})}function N(e){return(0,p.jsxs)("ul",{style:{display:"flex",alignItems:"center",margin:16},children:[(0,p.jsx)(z,{active:!e.value,onClick:function(){return e.onChange()},children:"All"}),[{value:"javascript",title:"Javascript"},{value:"ruby",title:"Ruby"},{value:"java",title:"Java"},{value:"css",title:"CSS"},{value:"python",title:"Python"}].map((function(t){return(0,p.jsx)(z,{active:e.value===t.value,onClick:function(){return e.onChange(t.value)},children:t.title},t.value)}))]})}function z(e){return(0,p.jsx)("li",{style:{padding:"0 8px",cursor:"pointer",color:e.active?x:void 0},onClick:e.onClick,children:e.children})}function J(e){return(0,p.jsx)("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"space-around",margin:"0 -8px"},children:e.children})}function L(e){return(0,p.jsx)("div",{style:{flex:"none",width:e.width,padding:8},children:e.children})}function U(e){return(0,p.jsx)("div",{style:{display:"flex",flexDirection:"column",minWidth:1200,height:"100%"},children:e.children})}function K(e){return(0,p.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",borderBottom:"1px solid rgba(0, 0, 0, 0.9)"},children:e.children})}function W(e){return(0,p.jsx)("div",{style:{flex:"auto",width:1e3,minHeight:0,margin:"0 auto",overflow:"auto"},children:e.children})}function B(e){return(0,p.jsx)(_,{style:{height:200},children:(0,p.jsx)("p",{children:e.message})})}function Y(){return(0,p.jsx)(_,{style:{height:200},children:(0,p.jsx)(g,{size:48,name:"spinner",className:"fa-spin-pulse"})})}function F(){var e=(0,o.useState)(new URLSearchParams(window.location.search).get("language")),t=(0,i.Z)(e,1)[0],r=(0,o.useState)(!0),n=(0,i.Z)(r,2),s=n[0],a=n[1],c=(0,o.useState)(!1),f=(0,i.Z)(c,2),h=f[0],d=f[1],g=(0,o.useState)([]),j=(0,i.Z)(g,2),y=j[0],v=j[1],x=(0,o.useState)(!1),b=(0,i.Z)(x,2),O=b[0],w=b[1],k=(0,o.useRef)(1);return(0,o.useEffect)((function(){l.getRepositories({language:t,page:1,per_page:10}).then((function(e){a(!1),v((function(t){return t.concat(e)}))})).catch((function(e){var t=u(e);w(t||!0),console.error(e)})).finally((function(){a(!1)}))}),[t]),(0,p.jsxs)(U,{children:[(0,p.jsx)(K,{children:(0,p.jsx)(N,{value:t,onChange:function(e){var t=new URL(window.location.href);e?t.searchParams.set("language",e):t.searchParams.delete("language"),window.location.href=t.toString()}})}),(0,p.jsxs)(W,{children:[s&&(0,p.jsx)(Y,{}),O?(0,p.jsx)(B,{message:"string"==typeof O?O:"发生未知错误，请刷新页面重试"}):(0,p.jsx)(J,{children:y.map((function(e,t){return(0,p.jsx)(L,{width:"25%",children:(0,p.jsx)(P,{rank:t+1,url:e.html_url,avatar:e.owner.avatar_url,name:e.name,username:e.owner.login,stars:e.stargazers_count,forks:e.forks,issues:e.open_issues})},e.id)}))}),!s&&!O&&(0,p.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",margin:"16px 0"},children:(0,p.jsx)(m,{loading:h,onClick:function(){h||(d(!0),l.getRepositories({language:t,page:k.current+1,per_page:10}).then((function(e){v((function(t){return t.concat(e)}))})).catch((function(e){u(e)||console.error(e)})).finally((function(){d(!1)})))},children:"加载更多"})})]})]})}n.createRoot(document.getElementById("container")).render((0,p.jsx)(F,{}))}},r={};function n(e){var i=r[e];if(void 0!==i)return i.exports;var o=r[e]={exports:{}};return t[e](o,o.exports,n),o.exports}n.m=t,e=[],n.O=(t,r,i,o)=>{if(!r){var s=1/0;for(u=0;u<e.length;u++){for(var[r,i,o]=e[u],a=!0,c=0;c<r.length;c++)(!1&o||s>=o)&&Object.keys(n.O).every((e=>n.O[e](r[c])))?r.splice(c--,1):(a=!1,o<s&&(s=o));if(a){e.splice(u--,1);var l=i();void 0!==l&&(t=l)}}return t}o=o||0;for(var u=e.length;u>0&&e[u-1][2]>o;u--)e[u]=e[u-1];e[u]=[r,i,o]},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={179:0};n.O.j=t=>0===e[t];var t=(t,r)=>{var i,o,[s,a,c]=r,l=0;if(s.some((t=>0!==e[t]))){for(i in a)n.o(a,i)&&(n.m[i]=a[i]);if(c)var u=c(n)}for(t&&t(r);l<s.length;l++)o=s[l],n.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return n.O(u)},r=self.webpackChunklf_training=self.webpackChunklf_training||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var i=n.O(void 0,[736],(()=>n(727)));i=n.O(i)})();
//# sourceMappingURL=main.js.map